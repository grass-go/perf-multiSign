#!/bin/bash

export PATH=$PATH:/usr/local/opt/postgresql/bin
psql=psql
DB="multi_sign"
HOST="123.56.3.74"
PORT="5432"
USER="postgres"
addAddress="TWtWEbY47eZE3TQfaAa7Vj53LV24hki1pf"

ts="2022-07-20 10:29:40"
count=1
for line in `cat /Users/wqq/Text/test_v4.0/perf-multiSign/prepareData/accounts.csv`
do  
    echo ${line}
    addrArray=(${line//,/ })
    echo ${addrArray[0]}
    sqlstr="update multi_tx set state=0, expire_time='$ts', signers='[{\"u\":\"${addrArray[0]}\",\"w\":1,\"is\":0,\"st\":1626661786000},{\"u\":\"TWtWEbY47eZE3TQfaAa7Vj53LV24hki1pf\",\"w\":1,\"is\":0,\"st\":1626661786000}]' where id=$count"
    echo ${sqlstr}
    #env PGPASSWORD=1234 psql -h${HOST} -U${USER} -p5432 -d${DB} -c "${sqlstr}"
    count=`expr ${count} + 1`
done

